function mdocs_wp(){jQuery('[data-toggle="popover"]').popover(),mdocs_add_update_documents(),mdocs_toogle_description_preview(),mdocs_description_preview(),mdocs_file_preview(),mdocs_image_preview(),mdocs_ratings(),mdocs_sort_files(),mdocs_submit_rating("small"),mdocs_share_modal(),mdocs_check_width(),jQuery(window).resize(function(){mdocs_check_width()})}function mdocs_admin(){mdocs_modal_close(),jQuery('[data-toggle="popover"]').popover(),mdocs_color_pickers(),mdocs_toogle_disable_setting("#mdocs-hide-all-files","#mdocs-hide-all-files-non-members"),mdocs_toogle_disable_setting("#mdocs-hide-all-files-non-members","#mdocs-hide-all-files"),mdocs_toogle_disable_setting("#mdocs-hide-all-posts","#mdocs-hide-all-posts-non-members"),mdocs_toogle_disable_setting("#mdocs-hide-all-posts-non-members","#mdocs-hide-all-posts"),mdocs_add_update_documents(),mdocs_description_preview(),mdocs_file_preview(),mdocs_image_preview(),mdocs_add_mime_type(),mdocs_remove_mime_type(),mdocs_restore_default_mimes(),mdocs_sort_files(),mdocs_ratings(),mdocs_share_modal(),jQuery("#mdosc-3-0-patch-btn").click(function(e){e.preventDefault();var o=Number(jQuery(this).data("num-docs"));mdocs_v3_0_patch(o)}),jQuery(".mdocs-show-social").click(function(){if(jQuery(this).hasClass("fa fa-plus-sign-alt")){jQuery(this).removeClass("fa fa-plus-sign-alt"),jQuery(this).addClass("fa fa-minus-sign-alt");var e=jQuery(this).prop("id");e=e.split("-");var o=e[e.length-1];jQuery("#mdocs-social-index-"+o).show()}else{jQuery(this).removeClass("fa fa-minus-sign-alt"),jQuery(this).addClass("icon-plus-sign-alt");var e=jQuery(this).prop("id");e=e.split("-");var o=e[e.length-1];jQuery("#mdocs-social-index-"+o).hide()}}),jQuery("#mdocs-add-cat").click(function(e){e.preventDefault()}),jQuery('input[id="mdocs-cat-remove"]').click(function(){var e=window.confirm(mdocs_js.category_delete),o=jQuery(this).prop("name");e&&(jQuery('[name="mdocs-cats['+o+'][remove]"]').prop("value",1),jQuery("#mdocs-cats").submit())}),jQuery("#mdocs-file-status").change(function(){"hidden"==jQuery(this).val()?jQuery("#mdocs-post-status").prop("disabled","true"):"public"==jQuery(this).val()&&jQuery("#mdocs-post-status").removeAttr("disabled")}),mdocs_check_width(),jQuery(window).resize(function(){mdocs_check_width()})}function mdocs_add_update_documents(){jQuery(".add-update-btn").click(function(){var e=jQuery(this).data("action-type"),o=jQuery(this).data("mdocs-id"),s=jQuery(this).data("current-cat"),t=(jQuery(this).data("nonce"),jQuery(this).data("is-admin"));jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:e,"mdocs-index":o,"current-cat":s,"is-admin":t},function(t){var a="Add Document";if("update-doc"==e){var d=JSON.parse(t);jQuery("#mdocs-add-update-form").prop("action","admin.php?page=memphis-documents.php&mdocs-cat="+s),jQuery('input[name="mdocs-type"]').prop("value","mdocs-update"),jQuery('input[name="mdocs-index"]').prop("value",o),jQuery('input[name="mdocs-pname"]').prop("value",d.name),jQuery('input[name="mdocs-post-status-sys"]').prop("value",d.post_status),a=mdocs_js.update_doc+" <small>"+d.filename+"</small>",jQuery("#mdocs-current-doc").html(mdocs_js.current_file+": "+d.filename),jQuery('input[name="mdocs-name"]').prop("value",d.name),jQuery('option[value="'+d.cat+'"]').prop("selected",!0),jQuery('input[name="mdocs-version"]').prop("value",d.version),"on"==d.show_social&&jQuery('input[name="mdocs-social"]').prop("checked",!0),"on"==d.non_members&&jQuery('input[name="mdocs-non-members"]').prop("checked",!0),"hidden"==d.file_status&&jQuery("#mdocs-post-status").prop("disabled",!0),jQuery("#mdocs-file-status option").each(function(){d.file_status==jQuery(this).val()&&jQuery(this).prop("selected",!0)}),jQuery("#mdocs-post-status option").each(function(){d.post_status==jQuery(this).val()&&jQuery(this).prop("selected",!0)}),d.desc=d.desc.replace(/(?:\r\n|\r|\n|&nbsp;)/g,"<br />"),console.debug(d.desc),tinyMCE.activeEditor.setContent(d.desc,{format:"raw"}),jQuery("#mdocs-save-doc-btn").prop("value",mdocs_js.update_doc_btn)}else jQuery('input[name="mdocs-name"]').val(""),jQuery('option[value="'+s+'"]').prop("selected",!0),jQuery('input[name="mdocs-version"]').val("1.0"),jQuery("#mdocs-current-doc").html(""),jQuery('input[name="mdocs-type"]').prop("value","mdocs-add"),a=mdocs_js.add_doc,jQuery("#mdocs-save-doc-btn").prop("value",mdocs_js.add_doc_btn);jQuery("#mdocs-add-update-header").html(a)})})}function add_main_category(e){mdocs_add_sub_cat(e,"",0,jQuery("#the-list"),!0)}function mdocs_color_pickers(){var e=jQuery("#bg-color-mdocs-picker").prop("value"),o=jQuery("#bg-hover-color-mdocs-picker").prop("value"),s=jQuery("#bg-text-color-mdocs-picker").prop("value"),t=jQuery("#bg-text-hover-color-mdocs-picker").prop("value"),a={change:function(a,d){var c=jQuery(this).prop("id");"bg-color-mdocs-picker"==c?(e=d.color.toString(),jQuery(".mdocs-download-btn-config").css("background",e)):"bg-hover-color-mdocs-picker"==c&&(o=d.color.toString()),"bg-text-color-mdocs-picker"==c?(s=d.color.toString(),jQuery(".mdocs-download-btn-config").css("color",s)):"bg-text-hover-color-mdocs-picker"==c&&(t=d.color.toString())}};jQuery('[id$="mdocs-picker"]').wpColorPicker(a),jQuery(".mdocs-download-btn-config").hover(function(){jQuery(this).css("background",o),jQuery(this).css("color",t)},function(){jQuery(this).css("background",e),jQuery(this).css("color",s)})}function mdocs_restore_default_mimes(){jQuery("#mdocs-restore-default-file-types").click(function(e){e.preventDefault(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"restore-mime",is_admin:!0},function(e){jQuery(".mdocs-mime-table").html(e),mdocs_remove_mime_type(),mdocs_add_mime_type()})})}function mdocs_add_mime_type(){jQuery("#mdocs-add-mime").click(function(e){e.preventDefault();var o=jQuery('input[name="mdocs-file-extension"]').val(),s=jQuery('input[name="mdocs-mime-type"]').val();jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"add-mime",file_extension:o,mime_type:s,is_admin:!0},function(e){jQuery(e).insertBefore(".mdocs-mime-submit"),mdocs_remove_mime_type(),jQuery('input[name="mdocs-file-extension"]').val(""),jQuery('input[name="mdocs-mime-type"]').val("")})})}function mdocs_remove_mime_type(){jQuery(".mdocs-remove-mime").click(function(e){e.preventDefault();var o=jQuery(this).parent().parent().data("file-type");jQuery(this).parent().parent().remove(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"remove-mime",file_extension:o,is_admin:!0},function(){})})}function mdocs_add_sub_cat(e,o,s,t,a){var d=parseInt(s)+1,c="";if(d<=mdocs_js.levels){jQuery('input[name="mdocs-update-cat-index"]').val(add_button_clicks++);var i='style="padding-left: '+40*d+'px; "';0==subcat_index?subcat_index=parseInt(e)+1:subcat_index++;var n=parseInt(jQuery('input[name="mdocs-cats['+o+'][num_children]"]').val())+1,r="";if(jQuery('input[name="mdocs-cats['+o+'][num_children]"]').val(n),a&&(i=0,n=jQuery(".wp-list-table > tbody > tr").size()+1,r="",d=0,c='class="parent-cat"'),void 0!=jQuery('input[name="mdocs-cats['+o+'][index]"]').val())var m=jQuery('input[name="mdocs-cats['+o+'][index]"]').val();else var m=0;subcat_index=jQuery("#mdocs-cats").data("cat-index");var u="	    <tr "+c+'>		<td  id="name" '+i+' >		   <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][index]" value="'+subcat_index+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][parent_index]" value="'+m+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][num_children]" value="0" />		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][depth]" value="'+d+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][parent]" value="'+o+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][slug]" value="mdocs-cat-'+subcat_index+'" />		    <input type="text" name="mdocs-cats[mdocs-cat-'+subcat_index+'][name]"  value="'+mdocs_js.new_category+'"  />		</td>		<td id="order">		    <input  type="text" name="mdocs-cats[mdocs-cat-'+subcat_index+'][order]"  value="'+n+'" '+r+' />		</td>		<td id="remove">			<input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][remove]" value="0"/>			<input type="button" id="mdocs-sub-cats-remove-new-'+subcat_index+'" class="button button-primary" value="Remove"  />		</td>		<td id="add-cat">		    <input type="button" class="mdocs-add-sub-cat button button-primary" id="mdocs-sub-cats-add-new-'+subcat_index+'" value="'+mdocs_js.add_folder+'""   />		</td>	    </tr>	    ';"the-list"==jQuery(t).prop("id")?jQuery(t).append(u):jQuery(u).insertAfter(jQuery(t).parent().parent()),jQuery('input[id="mdocs-sub-cats-remove-new-'+subcat_index+'"]').click(function(){jQuery('input[name="mdocs-cats['+o+'][num_children]"]').val(n-1),jQuery(this).parent().parent().remove()}),jQuery('input[id="mdocs-sub-cats-add-new-'+subcat_index+'"]').click(function(){var e=jQuery(this).prop("id").split("-");e=e[e.length-1];var o=(jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][parent]"]').val(),jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][slug]"]').val()),o=jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][slug]"]').val(),s=jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][depth]"]').val();mdocs_add_sub_cat(subcat_index,o,s,this)}),subcat_index++,jQuery("#mdocs-cats").data("cat-index",subcat_index)}else alert(mdocs_js.category_support)}function mdocs_set_onleave(){window.onbeforeunload=function(){return mdocs_js.leave_page}}function mdocs_reset_onleave(){window.onbeforeunload=null}function mdocs_download_zip(e){window.location.href="?mdocs-export-file="+e}function mdocs_download_current_version(e){window.location.href="?mdocs-file="+e}function mdocs_download_version(e){window.location.href="?mdocs-version="+e}function mdocs_delete_version(e,o,s,t){var a=window.confirm(mdocs_js.version_delete);a&&(window.location.href="admin.php?page=memphis-documents.php&mdocs-cat="+s+"&action=delete-version&version-file="+e+"&mdocs-index="+o+"&mdocs-nonce="+t)}function mdocs_delete_file(e,o,s){var t=window.confirm(mdocs_js.version_file);t&&(window.location.href="admin.php?page=memphis-documents.php&action=delete-doc&mdocs-index="+e+"&mdocs-cat="+o+"&mdocs-nonce="+s)}function mdocs_download_file(e,o){window.location.href="?mdocs-file="+e+"&mdocs-url="+o}function mdocs_share(e,o,s){0==toggle_share?(jQuery("#"+s+" .mdocs-share-link").remove(),jQuery("#"+s).append('<div class="mdocs-share-link"><br>'),jQuery(".mdocs-share-link").append('<div class="well well-sm"><h3><i class="fa fa-arrow-circle-o-right"></i> Download Page</h3><p>'+e+"</p></div>"),jQuery(".mdocs-share-link").append('<div class="well well-sm"><h3><i class="fa fa-download"></i> Direct Download</h3><p>'+o+"</p></div>"),jQuery(".mdocs-share-link").append("</div>"),toggle_share=!0):(jQuery("#"+s+" .mdocs-share-link").remove(),toggle_share=!1)}function mdocs_toogle_disable_setting(e,o){var s=jQuery(e).prop("checked");s?jQuery(o).prop("disabled",!0):jQuery(o).prop("disabled",!1),jQuery(e).click(function(){var e=jQuery(this).prop("checked");e?jQuery(o).prop("disabled",!0):jQuery(o).prop("disabled",!1)})}function mdocs_ratings(){jQuery(".ratings-button").click(function(){jQuery(".mdocs-ratings-body").empty();{var e=jQuery(this).data("mdocs-id");jQuery(this).data("is-admin")}jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"rating",mdocs_file_id:e,wp_root:mdocs_js.wp_root},function(o){jQuery(".mdocs-ratings-body").html(o),mdocs_submit_rating("large",e)})})}function mdocs_submit_rating(e,o){var s=jQuery(".mdocs-ratings-stars").data("my-rating");if("large"==e)for(e="fa-5x",index=1;6>index;++index)s>=index?jQuery("#"+index).prop("class","fa fa-star "+e+"  mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating");else e="fa-1x";jQuery(".mdocs-my-rating").click(function(){"fa-1x"==e&&(o=jQuery(".mdocs-post-header").data("mdocs-id")),s=jQuery(this).prop("id"),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"rating-submit",mdocs_file_id:o,"mdocs-rating":s},function(){window.location.href=""})}),jQuery(".mdocs-my-rating").mouseover(function(){for(index=1;6>index;++index)this.id>=index?jQuery("#"+index).prop("class","fa fa-star "+e+" mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating")}),jQuery(".mdocs-rating-container-small, .mdocs-rating-container").mouseout(function(){for(s=jQuery(".mdocs-ratings-stars").data("my-rating"),index=1;6>index;++index)s>=index?jQuery("#"+index).prop("class","fa fa-star "+e+"  mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating")})}function mdocs_restore_default(){confirm(mdocs_js.restore_warning)&&jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"restore",blog_id:mdocs_js.blog_id,is_admin:!0},function(){window.location.href="admin.php?page=memphis-documents.php&mdocs-cat=mdocuments&restore-default=true"})}function mdocs_description_preview(){jQuery(".description-preview").click(function(){jQuery(".mdocs-description-preview-body").empty();var e=jQuery(this).data("mdocs-id"),o=jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"show-desc",mdocs_file_id:e,is_admin:o},function(e){jQuery(".mdocs-description-preview-body").html(e)})})}function mdocs_file_preview(){jQuery(".file-preview").click(function(){jQuery(".mdocs-file-preview-body").empty();var e=jQuery(this).data("mdocs-id"),o=jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"file",mdocs_file_id:e,is_admin:o},function(e){jQuery(".mdocs-file-preview-body").html(e)})})}function mdocs_image_preview(){jQuery(".img-preview").click(function(){jQuery(".mdocs-file-preview-body").empty();var e=jQuery(this).data("mdocs-id"),o=jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"img",mdocs_file_id:e,is_admin:o},function(e){jQuery(".mdocs-file-preview-body").html(e)})})}function mdocs_toogle_description_preview(){jQuery(".mdocs-nav-tab").click(function(e){e.preventDefault(),jQuery(".mdocs-nav-tab").each(function(){jQuery(this).removeClass("mdocs-nav-tab-active")}),jQuery(this).addClass("mdocs-nav-tab-active"),jQuery("#mdocs-show-container-"+o).empty();var o=jQuery(this).data("mdocs-id"),s=jQuery(this).data("mdocs-show-type");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"show",show_type:s,mdocs_file_id:o,wp_root:mdocs_js.wp_root},function(e){jQuery("#mdocs-show-container-"+o).html(e)})})}function mdocs_sort_files(e){jQuery(".mdocs-sort-option").click(function(){var o=jQuery(this).data("permalink"),s=jQuery(this).data("current-cat"),t=jQuery(this).data("sort-type"),a=jQuery(this).children(":first").prop("class");a="fa fa-chevron-down"==a?"asc":"desc",jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"sort",sort_type:t,sort_range:a},function(t){jQuery(".mdocs-container").append(t),window.location.href=e?"admin.php?page=memphis-documents.php&mdocs-cat="+s:o})})}function mdocs_check_width(){jQuery("#mdocs-navbar").width()<600&&0==is_collapsed||jQuery("#mdocs-navbar").width()<600&&null==is_collapsed?(is_collapsed=!0,jQuery("#mdocs-nav-expand").remove(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"nav-collaspse"},function(e){jQuery("head").append(e)})):(jQuery("#mdocs-navbar").width()>600&&1==is_collapsed||jQuery("#mdocs-navbar").width()>600&&null==is_collapsed)&&(is_collapsed=!1,jQuery("#mdocs-nav-collapse").remove(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"nav-expand"},function(e){jQuery("head").append(e)}))}function mdocs_share_modal(){jQuery(".sharing-button").click(function(){jQuery(".mdocs-share-body").empty(),jQuery(".mdocs-share-body").html("<h1>Sharing</h1>"),jQuery(".mdocs-share-body").append('<div class="well well-sm"><h3><i class="fa fa-arrow-circle-o-right"></i> Download Page</h3><p>'+jQuery(this).data("permalink")+"</p></div>"),jQuery(".mdocs-share-body").append('<div class="well well-sm"><h3><i class="fa fa-download"></i> Direct Download</h3><p>'+jQuery(this).data("download")+"</p></div>")})}function mdocs_v3_0_patch(){if("object"==typeof mdocs_js)var e=mdocs_js;else var e=mdocs_patch_js;jQuery.post(e.ajaxurl,{action:"myajax-submit",type:"mdocs-v3-0-patch"},function(o){jQuery("body").append(o),jQuery("#run-updater-3-0").click(function(){jQuery(".container-3-0").html('		<div class="btn-container-3-0">		    <h3>'+e.patch_text_3_0_1+'</h3>		    <h1><i class="fa fa-spinner fa-pulse fa-3x"></i></h1>		    <h2>'+e.patch_text_3_0_2+"</h2>		</div>		"),jQuery.post(e.ajaxurl,{action:"myajax-submit",type:"mdocs-v3-0-patch-run-updater"},function(){window.location.href=""})}),jQuery("#not-now-3-0").click(function(){jQuery.post(e.ajaxurl,{action:"myajax-submit",type:"mdocs-v3-0-patch-cancel-updater"},function(){jQuery("html, body").css("overflowY","auto"),jQuery(".bg-3-0").remove(),jQuery(".container-3-0").remove()})})})}function mdocs_modal_close(){jQuery(".modal").on("hidden.bs.modal",function(){jQuery(".mdocs-modal-body").empty()})}var toggle_share=!1,subcat_index=0,add_button_clicks=1;is_collapsed=null;