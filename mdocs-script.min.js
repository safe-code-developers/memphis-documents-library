function mdocs_wp(){jQuery('[data-toggle="popover"]').popover(),mdocs_add_update_documents(),mdocs_toogle_description_preview(),mdocs_description_preview(),mdocs_file_preview(),mdocs_image_preview(),mdocs_ratings(),mdocs_sort_files(),mdocs_submit_rating("small"),mdocs_share_modal()}function mdocs_admin(){mdocs_modal_close(),jQuery('[data-toggle="popover"]').popover(),mdocs_color_pickers(),mdocs_toogle_disable_setting("#mdocs-hide-all-files","#mdocs-hide-all-files-non-members"),mdocs_toogle_disable_setting("#mdocs-hide-all-files-non-members","#mdocs-hide-all-files"),mdocs_toogle_disable_setting("#mdocs-hide-all-posts","#mdocs-hide-all-posts-non-members"),mdocs_toogle_disable_setting("#mdocs-hide-all-posts-non-members","#mdocs-hide-all-posts"),mdocs_add_update_documents(),mdocs_description_preview(),mdocs_file_preview(),mdocs_image_preview(),mdocs_add_mime_type(),mdocs_remove_mime_type(),mdocs_restore_default_mimes(),mdocs_sort_files(),mdocs_ratings(),mdocs_share_modal(),jQuery("#mdosc-3-0-patch-btn").click(function(e){e.preventDefault();var s=Number(jQuery(this).data("num-docs"));mdocs_v3_0_patch(s)}),jQuery(".mdocs-show-social").click(function(){if(jQuery(this).hasClass("fa fa-plus-sign-alt")){jQuery(this).removeClass("fa fa-plus-sign-alt"),jQuery(this).addClass("fa fa-minus-sign-alt");var e=jQuery(this).prop("id");e=e.split("-");var s=e[e.length-1];jQuery("#mdocs-social-index-"+s).show()}else{jQuery(this).removeClass("fa fa-minus-sign-alt"),jQuery(this).addClass("icon-plus-sign-alt");var e=jQuery(this).prop("id");e=e.split("-");var s=e[e.length-1];jQuery("#mdocs-social-index-"+s).hide()}}),jQuery("#mdocs-add-cat").click(function(e){e.preventDefault()}),jQuery('input[id="mdocs-cat-remove"]').click(function(){var e=window.confirm(mdocs_js.category_delete),s=jQuery(this).prop("name");e&&(jQuery('[name="mdocs-cats['+s+'][remove]"]').prop("value",1),jQuery("#mdocs-cats").submit())}),jQuery("#mdocs-file-status").change(function(){"hidden"==jQuery(this).val()?jQuery("#mdocs-post-status").prop("disabled","true"):"public"==jQuery(this).val()&&jQuery("#mdocs-post-status").removeAttr("disabled")})}function mdocs_add_update_documents(){jQuery(".add-update-btn").click(function(){var e=jQuery(this).data("action-type"),s=jQuery(this).data("mdocs-id"),o=jQuery(this).data("current-cat"),t=(jQuery(this).data("nonce"),jQuery(this).data("is-admin"));jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:e,"mdocs-index":s,"current-cat":o,"is-admin":t},function(t){var a="Add Document";if("update-doc"==e){var c=JSON.parse(t);jQuery("#mdocs-add-update-form").prop("action","admin.php?page=memphis-documents.php&mdocs-cat="+o),jQuery('input[name="mdocs-type"]').prop("value","mdocs-update"),jQuery('input[name="mdocs-index"]').prop("value",s),jQuery('input[name="mdocs-pname"]').prop("value",c.name),jQuery('input[name="mdocs-post-status-sys"]').prop("value",c.post_status),a=mdocs_js.update_doc+" <small>"+c.filename+"</small>",jQuery("#mdocs-current-doc").html(mdocs_js.current_file+": "+c.filename),jQuery('input[name="mdocs-name"]').prop("value",c.name),jQuery('option[value="'+c.cat+'"]').prop("selected",!0),jQuery('input[name="mdocs-version"]').prop("value",c.version),"on"==c.show_social&&jQuery('input[name="mdocs-social"]').prop("checked",!0),"on"==c.non_members&&jQuery('input[name="mdocs-non-members"]').prop("checked",!0),jQuery("#mdocs-file-status option").each(function(){c.file_status==jQuery(this).val()&&jQuery(this).prop("selected",!0)}),jQuery("#mdocs-post-status option").each(function(){c.post_status==jQuery(this).val()&&jQuery(this).prop("selected",!0)}),jQuery("#mdocs-current-owner").html('<i class="fa fa-user"></i> '+c.owner),jQuery("#mdocs-contributors-container").append('<input type="hidden" value="'+c.owner+'" name="mdocs-owner-value"/>'),jQuery('span[id^="mdocs-contributors["]').each(function(){jQuery(this).remove()}),jQuery('input[name^="mdocs-contributors["]').each(function(){jQuery(this).remove()});for(var d=0;d<c.contributors.length;d++)jQuery("#mdocs-contributors-container").append('<span class="label label-success mdocs-contributors" id="mdocs-contributors['+d+']" data-index="'+d+'"><i class="fa fa-user"></i> '+c.contributors[d]+' <i class="fa fa-times mdocs-contributors-delete-btn" id="mdocs-contributors-delete[mdocs-contributors['+d+']]"></i></span>'),jQuery("#mdocs-contributors-container").append('<input type="hidden" value="'+c.contributors[d]+'" name="mdocs-contributors['+d+']"/>');activate_contributors_delete_btn(),jQuery("#mdocs-add-contributors").keyup(function(){var e=jQuery(this).val().length;e>1?(jQuery(".mdocs-user-search-list").removeClass("hidden"),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"search-users","user-search-string":jQuery("#mdocs-add-contributors").val()},function(e){jQuery(".mdocs-user-search-list").html(e),jQuery(".mdocs-search-results-roles").click(function(e){e.preventDefault(),jQuery("#mdocs-contributors-container").append('<span class="label label-success mdocs-contributors" id="mdocs-contributors['+d+']" data-index="'+d+'"><i class="fa fa-user"></i> '+jQuery(this).data("value")+' <i class="fa fa-times mdocs-contributors-delete-btn" id="mdocs-contributors-delete[mdocs-contributors['+d+']]"></i></span>'),jQuery("#mdocs-contributors-container").append('<input type="hidden" value="'+jQuery(this).data("value")+'" name="mdocs-contributors['+d+']"/>'),d++,activate_contributors_delete_btn()}),jQuery(".mdocs-search-results-users").click(function(e){e.preventDefault(),jQuery("#mdocs-contributors-container").append('<span class="label label-success mdocs-contributors" id="mdocs-contributors['+d+']" data-index="'+d+'"><i class="fa fa-user"></i> '+jQuery(this).data("value")+' <i class="fa fa-times mdocs-contributors-delete-btn" id="mdocs-contributors-delete[mdocs-contributors['+d+']]"></i></span>'),jQuery("#mdocs-contributors-container").append('<input type="hidden" value="'+jQuery(this).data("value")+'" name="mdocs-contributors['+d+']"/>'),d++,jQuery("#mdocs-add-contributors").val(""),jQuery(".mdocs-user-search-list").html(""),jQuery("#mdocs-add-contributors").focus(),jQuery(".mdocs-user-search-list").addClass("hidden"),activate_contributors_delete_btn()})})):(jQuery(".mdocs-user-search-list").addClass("hidden"),jQuery(".mdocs-user-search-list").html())}),c.desc=c.desc.replace(/(?:\r\n|\r|\n|&nbsp;)/g,"<br />"),tinyMCE.activeEditor.setContent(c.desc,{format:"raw"}),jQuery("#mdocs-save-doc-btn").prop("value",mdocs_js.update_doc_btn)}else jQuery('input[name="mdocs-name"]').val(""),jQuery('option[value="'+o+'"]').prop("selected",!0),jQuery('input[name="mdocs-version"]').val("1.0"),jQuery("#mdocs-current-doc").html(""),jQuery("#mdocs-current-owner").html('<i class="fa fa-user"></i> '+jQuery('input[name="mdocs-current-user"]').val()),jQuery("#mdocs-contributors-container").append('<input type="hidden" value="'+jQuery('input[name="mdocs-current-user"]').val()+'" id="mdocs-owner-value"/>'),jQuery('input[name="mdocs-type"]').prop("value","mdocs-add"),a=mdocs_js.add_doc,jQuery("#mdocs-save-doc-btn").prop("value",mdocs_js.add_doc_btn);jQuery("#mdocs-add-update-header").html(a)})})}function activate_contributors_delete_btn(){jQuery(".mdocs-contributors-delete-btn").click(function(){var e=jQuery(this).parent().data("index");jQuery(this).parent().remove(),jQuery('input[name="mdocs-contributors['+e+']"]').remove()})}function add_main_category(e){mdocs_add_sub_cat(e,"",0,jQuery("#the-list"),!0)}function mdocs_color_pickers(){var e=jQuery("#bg-color-mdocs-picker").prop("value"),s=jQuery("#bg-hover-color-mdocs-picker").prop("value"),o=jQuery("#bg-text-color-mdocs-picker").prop("value"),t=jQuery("#bg-text-hover-color-mdocs-picker").prop("value"),a={change:function(a,c){var d=jQuery(this).prop("id");"bg-color-mdocs-picker"==d?(e=c.color.toString(),jQuery(".mdocs-download-btn-config").css("background",e)):"bg-hover-color-mdocs-picker"==d&&(s=c.color.toString()),"bg-text-color-mdocs-picker"==d?(o=c.color.toString(),jQuery(".mdocs-download-btn-config").css("color",o)):"bg-text-hover-color-mdocs-picker"==d&&(t=c.color.toString())}};jQuery('[id$="mdocs-picker"]').wpColorPicker(a),jQuery(".mdocs-download-btn-config").hover(function(){jQuery(this).css("background",s),jQuery(this).css("color",t)},function(){jQuery(this).css("background",e),jQuery(this).css("color",o)})}function mdocs_restore_default_mimes(){jQuery("#mdocs-restore-default-file-types").click(function(e){e.preventDefault(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"restore-mime",is_admin:!0},function(e){jQuery(".mdocs-mime-table").html(e),mdocs_remove_mime_type(),mdocs_add_mime_type()})})}function mdocs_add_mime_type(){jQuery("#mdocs-add-mime").click(function(e){e.preventDefault();var s=jQuery('input[name="mdocs-file-extension"]').val(),o=jQuery('input[name="mdocs-mime-type"]').val();jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"add-mime",file_extension:s,mime_type:o,is_admin:!0},function(e){jQuery(e).insertBefore(".mdocs-mime-submit"),mdocs_remove_mime_type(),jQuery('input[name="mdocs-file-extension"]').val(""),jQuery('input[name="mdocs-mime-type"]').val("")})})}function mdocs_remove_mime_type(){jQuery(".mdocs-remove-mime").click(function(e){e.preventDefault();var s=jQuery(this).parent().parent().data("file-type");jQuery(this).parent().parent().remove(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"remove-mime",file_extension:s,is_admin:!0},function(){})})}function mdocs_add_sub_cat(e,s,o,t,a){var c=parseInt(o)+1,d="";if(c<=mdocs_js.levels){jQuery('input[name="mdocs-update-cat-index"]').val(add_button_clicks++);var i='style="padding-left: '+40*c+'px; "';0==subcat_index?subcat_index=parseInt(e)+1:subcat_index++;var r=parseInt(jQuery('input[name="mdocs-cats['+s+'][num_children]"]').val())+1,n="";if(jQuery('input[name="mdocs-cats['+s+'][num_children]"]').val(r),a&&(i=0,r=jQuery(".wp-list-table > tbody > tr").size()+1,n="",c=0,d='class="parent-cat"'),void 0!=jQuery('input[name="mdocs-cats['+s+'][index]"]').val())var u=jQuery('input[name="mdocs-cats['+s+'][index]"]').val();else var u=0;subcat_index=jQuery("#mdocs-cats").data("cat-index");var m="	    <tr "+d+'>		<td  id="name" '+i+' >		   <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][index]" value="'+subcat_index+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][parent_index]" value="'+u+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][num_children]" value="0" />		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][depth]" value="'+c+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][parent]" value="'+s+'"/>		    <input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][slug]" value="mdocs-cat-'+subcat_index+'" />		    <input type="text" name="mdocs-cats[mdocs-cat-'+subcat_index+'][name]"  value="'+mdocs_js.new_category+'"  />		</td>		<td id="order">		    <input  type="text" name="mdocs-cats[mdocs-cat-'+subcat_index+'][order]"  value="'+r+'" '+n+' />		</td>		<td id="remove">			<input type="hidden" name="mdocs-cats[mdocs-cat-'+subcat_index+'][remove]" value="0"/>			<input type="button" id="mdocs-sub-cats-remove-new-'+subcat_index+'" class="button button-primary" value="Remove"  />		</td>		<td id="add-cat">		    <input type="button" class="mdocs-add-sub-cat button button-primary" id="mdocs-sub-cats-add-new-'+subcat_index+'" value="'+mdocs_js.add_folder+'""   />		</td>	    </tr>	    ';"the-list"==jQuery(t).prop("id")?jQuery(t).append(m):jQuery(m).insertAfter(jQuery(t).parent().parent()),jQuery('input[id="mdocs-sub-cats-remove-new-'+subcat_index+'"]').click(function(){jQuery('input[name="mdocs-cats['+s+'][num_children]"]').val(r-1),jQuery(this).parent().parent().remove()}),jQuery('input[id="mdocs-sub-cats-add-new-'+subcat_index+'"]').click(function(){var e=jQuery(this).prop("id").split("-");e=e[e.length-1];var s=(jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][parent]"]').val(),jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][slug]"]').val()),s=jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][slug]"]').val(),o=jQuery('input[name="mdocs-cats[mdocs-cat-'+e+'][depth]"]').val();mdocs_add_sub_cat(subcat_index,s,o,this)}),subcat_index++,jQuery("#mdocs-cats").data("cat-index",subcat_index)}else alert(mdocs_js.category_support)}function mdocs_set_onleave(){window.onbeforeunload=function(){return mdocs_js.leave_page}}function mdocs_reset_onleave(){window.onbeforeunload=null}function mdocs_download_zip(e){window.location.href="?mdocs-export-file="+e}function mdocs_download_current_version(e){window.location.href="?mdocs-file="+e}function mdocs_download_version(e){window.location.href="?mdocs-version="+e}function mdocs_delete_version(e,s,o,t){var a=window.confirm(mdocs_js.version_delete);a&&(window.location.href="admin.php?page=memphis-documents.php&mdocs-cat="+o+"&action=delete-version&version-file="+e+"&mdocs-index="+s+"&mdocs-nonce="+t)}function mdocs_delete_file(e,s,o){var t=window.confirm(mdocs_js.version_file);t&&(window.location.href="admin.php?page=memphis-documents.php&action=delete-doc&mdocs-index="+e+"&mdocs-cat="+s+"&mdocs-nonce="+o)}function mdocs_download_file(e,s){window.location.href="?mdocs-file="+e+"&mdocs-url="+s}function mdocs_share(e,s,o){0==toggle_share?(jQuery("#"+o+" .mdocs-share-link").remove(),jQuery("#"+o).append('<div class="mdocs-share-link"><br>'),jQuery(".mdocs-share-link").append('<div class="well well-sm"><h3><i class="fa fa-arrow-circle-o-right"></i> Download Page</h3><p>'+e+"</p></div>"),jQuery(".mdocs-share-link").append('<div class="well well-sm"><h3><i class="fa fa-download"></i> Direct Download</h3><p>'+s+"</p></div>"),jQuery(".mdocs-share-link").append("</div>"),toggle_share=!0):(jQuery("#"+o+" .mdocs-share-link").remove(),toggle_share=!1)}function mdocs_toogle_disable_setting(e,s){var o=jQuery(e).prop("checked");o?jQuery(s).prop("disabled",!0):jQuery(s).prop("disabled",!1),jQuery(e).click(function(){var e=jQuery(this).prop("checked");e?jQuery(s).prop("disabled",!0):jQuery(s).prop("disabled",!1)})}function mdocs_ratings(){jQuery(".ratings-button").click(function(){jQuery(".mdocs-ratings-body").empty();{var e=jQuery(this).data("mdocs-id");jQuery(this).data("is-admin")}jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"rating",mdocs_file_id:e,wp_root:mdocs_js.wp_root},function(s){jQuery(".mdocs-ratings-body").html(s),mdocs_submit_rating("large",e)})})}function mdocs_submit_rating(e,s){var o=jQuery(".mdocs-ratings-stars").data("my-rating");if("large"==e)for(e="fa-5x",index=1;6>index;++index)o>=index?jQuery("#"+index).prop("class","fa fa-star "+e+"  mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating");else e="fa-1x";jQuery(".mdocs-my-rating").click(function(){"fa-1x"==e&&(s=jQuery(".mdocs-post-header").data("mdocs-id")),o=jQuery(this).prop("id"),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"rating-submit",mdocs_file_id:s,"mdocs-rating":o},function(){window.location.href=""})}),jQuery(".mdocs-my-rating").mouseover(function(){for(index=1;6>index;++index)this.id>=index?jQuery("#"+index).prop("class","fa fa-star "+e+" mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating")}),jQuery(".mdocs-rating-container-small, .mdocs-rating-container").mouseout(function(){for(o=jQuery(".mdocs-ratings-stars").data("my-rating"),index=1;6>index;++index)o>=index?jQuery("#"+index).prop("class","fa fa-star "+e+"  mdocs-gold mdocs-my-rating"):jQuery("#"+index).prop("class","fa fa-star-o "+e+" mdocs-my-rating")})}function mdocs_restore_default(){confirm(mdocs_js.restore_warning)&&jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"restore",blog_id:mdocs_js.blog_id,is_admin:!0},function(){window.location.href="admin.php?page=memphis-documents.php&mdocs-cat=mdocuments&restore-default=true"})}function mdocs_description_preview(){jQuery(".description-preview").click(function(){jQuery(".mdocs-description-preview-body").empty();var e=jQuery(this).data("mdocs-id"),s=jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"show-desc",mdocs_file_id:e,is_admin:s},function(e){jQuery(".mdocs-description-preview-body").html(e)})})}function mdocs_file_preview(){jQuery(".file-preview").click(function(){jQuery(".mdocs-file-preview-body").empty();var e=jQuery(this).data("mdocs-id"),s=jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"file",mdocs_file_id:e,is_admin:s},function(e){jQuery(".mdocs-file-preview-body").html(e)})})}function mdocs_image_preview(){jQuery(".img-preview").click(function(){jQuery(".mdocs-file-preview-body").empty();var e=jQuery(this).data("mdocs-id"),s=jQuery(this).data("is-admin");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"img",mdocs_file_id:e,is_admin:s},function(e){jQuery(".mdocs-file-preview-body").html(e)})})}function mdocs_toogle_description_preview(){jQuery(".mdocs-nav-tab").click(function(e){e.preventDefault(),jQuery(".mdocs-nav-tab").each(function(){jQuery(this).removeClass("mdocs-nav-tab-active")}),jQuery(this).addClass("mdocs-nav-tab-active"),jQuery("#mdocs-show-container-"+s).empty();var s=jQuery(this).data("mdocs-id"),o=jQuery(this).data("mdocs-show-type");jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"show",show_type:o,mdocs_file_id:s,wp_root:mdocs_js.wp_root},function(e){jQuery("#mdocs-show-container-"+s).html(e)})})}function mdocs_sort_files(e){jQuery(".mdocs-sort-option").click(function(){var s=jQuery(this).data("permalink"),o=jQuery(this).data("current-cat"),t=jQuery(this).data("sort-type"),a=jQuery(this).children(":first").prop("class");a="fa fa-chevron-down"==a?"asc":"desc",jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"sort",sort_type:t,sort_range:a},function(t){jQuery(".mdocs-container").append(t),window.location.href=e?"admin.php?page=memphis-documents.php&mdocs-cat="+o:s})})}function mdocs_check_width(){jQuery("#mdocs-navbar").width()<600&&0==is_collapsed||jQuery("#mdocs-navbar").width()<600&&null==is_collapsed?(is_collapsed=!0,jQuery("#mdocs-nav-expand").remove(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"nav-collaspse"},function(e){jQuery("head").append(e)})):(jQuery("#mdocs-navbar").width()>600&&1==is_collapsed||jQuery("#mdocs-navbar").width()>600&&null==is_collapsed)&&(is_collapsed=!1,jQuery("#mdocs-nav-collapse").remove(),jQuery.post(mdocs_js.ajaxurl,{action:"myajax-submit",type:"nav-expand"},function(e){jQuery("head").append(e)}))}function mdocs_share_modal(){jQuery(".sharing-button").click(function(){jQuery(".mdocs-share-body").empty(),jQuery(".mdocs-share-body").html("<h1>Sharing</h1>"),jQuery(".mdocs-share-body").append('<div class="well well-sm"><h3><i class="fa fa-arrow-circle-o-right"></i> Download Page</h3><p>'+jQuery(this).data("permalink")+"</p></div>"),jQuery(".mdocs-share-body").append('<div class="well well-sm"><h3><i class="fa fa-download"></i> Direct Download</h3><p>'+jQuery(this).data("download")+"</p></div>")})}function mdocs_v3_0_patch(){if("object"==typeof mdocs_js)var e=mdocs_js;else var e=mdocs_patch_js;jQuery.post(e.ajaxurl,{action:"myajax-submit",type:"mdocs-v3-0-patch"},function(s){jQuery("body").append(s),jQuery("#run-updater-3-0").click(function(){jQuery(".container-3-0").html('		<div class="btn-container-3-0">		    <h3>'+e.patch_text_3_0_1+'</h3>		    <h1><i class="fa fa-spinner fa-pulse fa-3x"></i></h1>		    <h2>'+e.patch_text_3_0_2+"</h2>		</div>		"),jQuery.post(e.ajaxurl,{action:"myajax-submit",type:"mdocs-v3-0-patch-run-updater"},function(){window.location.href=""})}),jQuery("#not-now-3-0").click(function(){jQuery.post(e.ajaxurl,{action:"myajax-submit",type:"mdocs-v3-0-patch-cancel-updater"},function(){jQuery("html, body").css("overflowY","auto"),jQuery(".bg-3-0").remove(),jQuery(".container-3-0").remove()})})})}function mdocs_modal_close(){jQuery(".modal").on("hidden.bs.modal",function(){jQuery(".mdocs-modal-body").empty()})}var toggle_share=!1,subcat_index=0,add_button_clicks=1;is_collapsed=null;